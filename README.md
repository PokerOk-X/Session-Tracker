# Трекер игровых сессий на ПокерОк

Консольный трекер покерных сессий для PokerOK на Python. Скрипт помогает быстро и аккуратно фиксировать результаты игры: старт/финиш сессии, профит, длительность и базовые метрики (bb/100 для кэша, ROI для MTT/Spin&Gold) — с сохранением истории в CSV.

---

## Возможности

### ✅ Учёт сессий (PokerOK)
- Старт сессии (`start`) — создаётся файл активной сессии
- Завершение (`end`) — ввод финальных значений, автоматический расчёт метрик, запись в журнал
- Быстрый лог (`log`) — одна команда для ручного внесения завершённой сессии
- Статус (`status`) — показывает активную сессию и текущую длительность
- Статистика (`stats`) — сводка по всем сессиям + разрез по форматам и фильтры по датам

### ✅ Метрики
**Общее:**
- `profit` = `bankroll_end - bankroll_start`
- длительность сессии (мин/часы)
- profit/hour в общей статистике

**Cash:**
- `bb_profit` = `profit / bb_value`
- `bb/100` (если указаны `hands` и `bb_value`)

**MTT / Spin&Gold:**
- `profit` = `prize_total - buyin_total` (если введены суммы)
- `ROI` = `profit / buyin_total * 100` (если `buyin_total > 0`)

---

## Быстрый старт

### Требования
- Python **3.9+** (рекомендуется 3.10+)
- Внешние зависимости **не нужны** (только стандартная библиотека)

### Установка
Клонируйте репозиторий:
```bash
git clone https://github.com/PokerOk-X/Session-Tracker.git
cd Session-Tracker
````

Проверка:

```bash
python tracker.py
```

---

## Использование

> По умолчанию журнал сохраняется в `sessions.csv`, а активная сессия — в `active_session.json` в текущей папке.

### 1) Начать сессию

```bash
python tracker.py start
```

Скрипт спросит:

* формат: `cash` / `mtt` / `spin`
* лимит/бай-ин (строка, например: `NL10`, `5$`, `10$+1$`)
* валюта (опционально)
* банкролл на старте
* кол-во столов (опционально)
* заметка (опционально)

После этого создаётся `active_session.json`.

---

### 2) Проверить активную сессию

```bash
python tracker.py status
```

Показывает:

* время старта
* сколько длится
* формат, лимит/бай-ин
* BR на старте, заметку и т.д.

---

### 3) Завершить сессию

```bash
python tracker.py end
```

Скрипт попросит ввести финальные значения и (в зависимости от формата) дополнительные поля:

#### Cash

* банкролл на финише
* рук сыграно (`hands`) — опционально
* стоимость 1 BB (`bb_value`) — опционально, нужна для bb/100
  Пример: **NL10 → BB = 0.10**

#### MTT / Spin&Gold

* банкролл на финише
* `buyin_total` и `prize_total` — опционально (рекомендуется, чтобы считать ROI)

После завершения:

* запись добавляется в `sessions.csv`
* файл `active_session.json` удаляется

---

### 4) Быстро записать завершённую сессию (одной командой)

```bash
python tracker.py log
```

Полезно, если забыли запустить `start` или хотите вручную занести прошлую сессию.
Можно указать дату, время (start/end) или длительность.

---

## Статистика

### Общая статистика

```bash
python tracker.py stats
```

Выводит:

* кол-во сессий
* суммарный профит
* суммарное время
* средняя длительность
* profit/hour
* разрез по форматам (Cash/MTT/Spin)

### Фильтрация по датам и формату

```bash
python tracker.py stats --from 2025-12-01 --to 2025-12-31
python tracker.py stats --format cash
python tracker.py stats --from 2025-12-01 --to 2025-12-31 --format mtt
```

---

## Файлы данных

### `sessions.csv`

Основной журнал завершённых сессий (создаётся автоматически при первой записи).

Колонки:

* общие: `id`, `poker_room`, `format`, `stake`, `currency`, `start_ts`, `end_ts`, `duration_min`, `bankroll_start`, `bankroll_end`, `profit`, `tables`, `note`
* cash: `hands`, `bb_value`, `bb_profit`, `bb_per_100`
* mtt/spin: `buyin_total`, `prize_total`, `roi`

### `active_session.json`

Черновик активной сессии (создаётся на `start`, удаляется на `end`).

---

## Полезные примеры

### Пример: Cash-сессия NL10

1. `start` → формат `cash`, stake `NL10`, BR start `500`
2. `end` → BR end `512`, hands `1200`, bb_value `0.10`

Скрипт посчитает:

* profit: `12.00`
* bb_profit: `120.00`
* bb/100: `10.00`

---

## Параметры (опционально)

Вы можете указать свои пути к файлам:

```bash
python tracker.py --file data/sessions.csv --active data/active_session.json start
```

---

## Частые проблемы

### “Активная сессия уже существует”

Значит файл `active_session.json` уже есть.

* завершите её: `python tracker.py end`
* либо удалите файл вручную (если это старый/битый черновик)

### “Нет данных”

`stats` показывает пусто, если `sessions.csv` ещё не создан или в нём нет записей — добавьте сессию через `start/end` или `log`.

---

## Лицензия

Проект распространяется по лицензии **MIT**. Подробности см. в файле `LICENSE`.
